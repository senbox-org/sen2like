# Sen2Like Release Notes

## v4.0.2

### Fix

* Landsat: collection 2 support: fix BQA extraction (threshold)

### New features

* Sentinel-2: support of processing baseline 4.0 (L1 cloud mask as a raster)
* Landsat-9: Add support of local product archive

## v4.0.1

### Fix

* Bad access to landsat collection number.

## v4.0.0

### New features

* Use SpatiaLite open source library for on the fly computation of required Sentinel-2 MGRS Tiles / Landsat 8/9 WRS scenes  (replaced precalculate database).
* Use Sen2cor 3.0 (independent installation procedure) supporting L1 Collection-1 Landsat 8/9 with Region Of Interest (ROI) processing; the ROI defined by the MGRS footprint within the WRS scene is considered.
* In STAC catalog built by the generator, *href* are web url to request files and no longer their absolute path on file system.
* In the output band images, the 0 value is now reserved to nodata. Negative pixels potentially generated by Sen2like processing blocks (e.g. overcorrection from AtmCorr, NBAR) are clipped to minimum surface reflectance value of 0.0001. Corresponding to Digital Number (DN) = 1 in the image data.
* In the output band images (and only them), in COG and GeoTIFF, nodata pixels can be present (related to DN value 0), e.g. part of the image outside of the satellite acquisition swath.
* For the Quick looks images located in QI_DATA folder, the GDAL-generated aux.xml files contain now the correct scale/offset information for visualization (e.g. with QGIS) or statistics computation.
* In conversion to reflectance, sen2like now uses the radiometric offset written in input product metadata (if available like in Sentinel-2 with PB >= 04.00). 

### New environment

* Update GDAL to 3.3, OpenJPEG to 2.4 and Python to 3.7 and all their dependences

### Fixes

* Don't apply intercalibration on level 2 products.
* In Digital Number (DN) conversion to surface reflectance, Landsat Level-2 surface reflectance is independent of sun elevation (vs Landsat L1 TOA reflectance conversion)

## v3.3.0

### New features

* BRDF correction (in Nbar) can use VJB coefficient in place of ROY
* Add new module for intercalibration correction
* Use SCL file, if exist, to compute mask.
* Add a fusion auto check and his result in intermediate product and output
* Local product are now filter by cloud cover as creodias product

### New environment

* Add mgrs 1.4.0 module to requirement

### Fixes

* Add cloud coverage in output sen2like landsat product metadata

## v3.2.0

### New features

* Add support for new products
    * Maja products
    * Landsat-8 Collection 2
    * Landsat-9
* Disable geometric correction for refined products
* In Atmospheric correction, add a reader for CAMS daily data
* Metadata are also written in json format
* Add per-band parallelization
* Add a parameter to force geometric correction
* Add support for JPEG2000 output format in configuration file
* Add a downloader for Copernicus DEM
* Generate stac items for output products

### Fixes

* Fix image format written in metadata file
* Harmonize L8 tile/granule ID with S2
* For S2 products replace the granuleIdentifier by the virtual full PDGS filename

## v3.1.1

### Fixes

* Packagers L2H and L2F can now be both activated at same time
* Output files are now created only at expected resolutions
* Outputs band files for Packagers L2H and L2F now use S2 band names
* Update COG options in configuration file
* QuickLook for SWIR-NIR now use B12, B11 and B8A
* Fix native thermal bands outputs for L8 products

## v3.1

### New features

* Integration of sen2cor (preliminary version)
* Add support for L2A products
* Improve CAMS data management (use of monthly, hourly and climatology data)
* New L2F / L2H output formats
* Bands for geometry assessment can now be specified in configuration file
* Add support for COG output format in configuration file

### Fixes

* [GIPP] parameters are missing in the xml compared to the .ini file
* [GIPP] the xsd file is not found if processor not run from its own directory
* [Stitching] takes always previous row product.
* [Mutli-Tile] fails when parallelisation is enabled
